<div class="container mx-auto py-6">
  <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center mb-6 space-y-4 lg:space-y-0">
    <h1 class="text-2xl lg:text-3xl font-bold text-slate-100 flex items-center">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3 text-blue-500 info-icon" viewBox="0 0 20 20" fill="currentColor" style="filter: drop-shadow(0 0 3px #3b82f6);">
        <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z" />
      </svg>
      Equipos de Smash
    </h1>
    
    <div class="flex flex-col sm:flex-row gap-2 w-full lg:w-auto">
      <% if user_signed_in? %>
        <button 
          onclick="openCreateTeamModal()" 
          class="inline-flex items-center px-3 sm:px-4 py-2 border border-purple-600 text-sm font-medium rounded-md shadow-sm text-purple-400 bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 transition-colors duration-200 cursor-pointer">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 sm:h-3 sm:w-3 sm:mr-2" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd" />
          </svg>
          <span class="hidden sm:inline">Crear Equipo</span>
          <span class="sm:hidden">Crear</span>
        </button>
      <% end %>
      
      <%= link_to players_path, 
                class: "inline-flex items-center px-3 sm:px-4 py-2 border border-red-600 text-sm font-medium rounded-md shadow-sm text-red-400 bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200 cursor-pointer" do %>
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 sm:h-3 sm:w-3 sm:mr-2" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
        </svg>
        <span class="hidden sm:inline">Ver Jugadores</span>
        <span class="sm:hidden">Jugadores</span>
      <% end %>
      
      <%= link_to tournaments_path, 
                class: "inline-flex items-center px-3 sm:px-4 py-2 border border-green-600 text-sm font-medium rounded-md shadow-sm text-green-400 bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200 cursor-pointer" do %>
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 sm:h-3 sm:w-3 sm:mr-2" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z" clip-rule="evenodd" />
        </svg>
        <span class="hidden sm:inline">Ver Torneos</span>
        <span class="sm:hidden">Torneos</span>
      <% end %>
    </div>
  </div>

  <!-- Filtros y B√∫squeda -->
  <div class="mb-6 bg-slate-800 rounded-lg shadow-md border border-slate-600 p-5">
    <%= form_with(url: teams_path, method: :get, local: false, data: { controller: "search" }) do |f| %>
      <!-- B√∫squeda por texto -->
      <div class="relative mb-4">
        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-slate-400" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
          </svg>
        </div>
        <%= f.text_field :query, 
                      value: @query, 
                      placeholder: "Buscar por nombre o sigla del equipo...", 
                      class: "pl-10 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm text-sm border-slate-600 bg-slate-700 text-slate-200 rounded-md py-3 tracking-wide",
                      autocomplete: "off",
                      data: { 
                        search_target: "input",
                        action: "input->search#inputChanged"
                      } %>
        <% if @query.present? %>
          <div class="absolute inset-y-0 right-0 pr-3 flex items-center">
            <%= link_to teams_path, class: "text-slate-400 hover:text-slate-300 cursor-pointer" do %>
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
              </svg>
            <% end %>
          </div>
        <% end %>
      </div>

      <!-- Ordenamiento -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
        <div>
          <label class="block text-xs font-medium text-slate-300 mb-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 inline mr-1" viewBox="0 0 20 20" fill="currentColor">
              <path d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 8a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 12a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 16a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" />
            </svg>
            Ordenar por
          </label>
          <%= f.select :sort_by, 
                options_for_select([
                  ['üî§ Nombre A-Z', 'name_asc'],
                  ['üî§ Nombre Z-A', 'name_desc'],
                  ['üè∑Ô∏è Sigla A-Z', 'acronym_asc'],
                  ['üè∑Ô∏è Sigla Z-A', 'acronym_desc'],
                  ['‚¨ÜÔ∏è M√°s jugadores', 'players_count_desc'],
                  ['‚¨áÔ∏è Menos jugadores', 'players_count_asc'],
                  ['üÜï M√°s recientes', 'created_desc'],
                  ['üìÖ M√°s antiguos', 'created_asc']
                ], @sort_by || 'name_asc'),
                {},
                {
                  class: "w-full bg-slate-700 border border-slate-600 text-slate-200 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",
                  data: { 
                    search_target: "sort",
                    action: "change->search#selectChanged"
                  }
                } %>
        </div>
      </div>

      <!-- Botones de acci√≥n -->
      <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
        <div class="flex items-center space-x-2">
          <%= link_to teams_path, 
                class: "inline-flex items-center px-3 py-2 border border-slate-500 text-slate-300 bg-slate-700 rounded-md hover:bg-slate-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-colors text-xs",
                title: "Limpiar todos los filtros" do %>
            <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 mr-1" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd" />
            </svg>
            Limpiar Filtros
          <% end %>
        </div>

        <!-- Estad√≠sticas r√°pidas -->
        <div class="text-xs text-slate-400 flex items-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 mr-2" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
          </svg>
          <span class="tracking-wide">Los filtros se aplican autom√°ticamente</span>
        </div>
      </div>
    <% end %>
  </div>

  <%= render "teams_list", teams: @teams %>
</div>

<!-- Modal para crear equipo -->
<% if user_signed_in? %>
  <div id="createTeamModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-[9999] flex items-center justify-center">
    <div class="bg-slate-800 rounded-lg shadow-xl border border-slate-600 p-6 w-full max-w-2xl mx-4 relative max-h-[90vh] overflow-y-auto">
      <div class="flex justify-between items-center mb-6">
        <h3 class="text-xl font-semibold text-slate-100">Crear Nuevo Equipo</h3>
        <button onclick="closeCreateTeamModal()" class="text-slate-400 hover:text-slate-200 transition-colors">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>

      <form id="createTeamForm" action="/teams" method="POST" enctype="multipart/form-data">
        <%= hidden_field_tag :authenticity_token, form_authenticity_token %>
        
        <!-- Nombre del equipo -->
        <div class="mb-6">
          <label class="block text-sm font-medium text-slate-200 mb-2">
            Nombre del Equipo *
          </label>
          <input type="text" 
                 name="team[name]" 
                 id="teamName"
                 placeholder="Ej: Team Zero, Cloud9, etc."
                 class="w-full bg-slate-700 border border-slate-600 text-slate-200 rounded-md px-4 py-3 text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500"
                 required>
          <div id="nameError" class="text-red-400 text-xs mt-1 hidden"></div>
        </div>

        <!-- Sigla del equipo -->
        <div class="mb-6">
          <label class="block text-sm font-medium text-slate-200 mb-2">
            Sigla del Equipo *
          </label>
          <input type="text" 
                 name="team[acronym]" 
                 id="teamAcronym"
                 placeholder="Ej: TZ, C9, etc. (2-5 caracteres)"
                 maxlength="5"
                 class="w-full bg-slate-700 border border-slate-600 text-slate-200 rounded-md px-4 py-3 text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500"
                 required>
          <div id="acronymError" class="text-red-400 text-xs mt-1 hidden"></div>
          <p class="text-slate-500 text-xs mt-1">Entre 2 y 5 caracteres. Se mostrar√° si no hay logo.</p>
        </div>

        <!-- Descripci√≥n -->
        <div class="mb-6">
          <label class="block text-sm font-medium text-slate-200 mb-2">
            Descripci√≥n
          </label>
          <textarea name="team[description]" 
                    id="teamDescription"
                    rows="3"
                    placeholder="Descripci√≥n opcional del equipo..."
                    maxlength="500"
                    class="w-full bg-slate-700 border border-slate-600 text-slate-200 rounded-md px-4 py-3 text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500"></textarea>
          <div id="descriptionError" class="text-red-400 text-xs mt-1 hidden"></div>
          <p class="text-slate-500 text-xs mt-1">M√°ximo 500 caracteres.</p>
        </div>

        <!-- Logo del equipo -->
        <div class="mb-6">
          <label class="block text-sm font-medium text-slate-200 mb-2">
            Logo del Equipo
          </label>
          <div class="flex items-center space-x-4">
            <!-- Preview del logo -->
            <div id="logoPreview" class="w-20 h-20 bg-slate-700 border-2 border-dashed border-slate-500 rounded-lg flex items-center justify-center hidden">
              <img id="logoImage" class="w-full h-full object-cover rounded-lg" alt="Preview del logo">
            </div>
            
            <!-- Placeholder cuando no hay logo -->
            <div id="logoPlaceholder" class="w-20 h-20 bg-gradient-to-r from-purple-600 to-purple-800 rounded-lg flex items-center justify-center border-2 border-purple-500">
              <span id="acronymPreview" class="text-white font-bold text-lg">?</span>
            </div>
            
            <!-- Input de archivo -->
            <div class="flex-1">
              <input type="file" 
                     name="team[logo_image]" 
                     id="logoInput"
                     accept="image/*"
                     class="hidden"
                     onchange="previewLogo(this)">
              <button type="button" 
                      onclick="document.getElementById('logoInput').click()"
                      class="inline-flex items-center px-4 py-2 border border-slate-500 text-slate-300 bg-slate-700 rounded-md hover:bg-slate-600 transition-colors text-sm">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd" />
                </svg>
                Seleccionar Logo
              </button>
              <button type="button" 
                      onclick="removeLogo()"
                      id="removeLogoBtn"
                      class="ml-2 inline-flex items-center px-3 py-2 border border-red-600 text-red-400 bg-slate-700 rounded-md hover:bg-slate-600 transition-colors text-sm hidden">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
                </svg>
                Quitar
              </button>
            </div>
          </div>
          <div id="logoError" class="text-red-400 text-xs mt-1 hidden"></div>
          <p class="text-slate-500 text-xs mt-1">
            Imagen cuadrada recomendada. Formatos: JPEG, PNG, GIF, WebP. M√°ximo 5MB.
          </p>
        </div>

        <!-- Botones -->
        <div class="flex justify-end space-x-3">
          <button type="button" 
                  onclick="closeCreateTeamModal()" 
                  class="px-4 py-2 border border-slate-500 text-slate-300 bg-slate-700 rounded-md hover:bg-slate-600 transition-colors">
            Cancelar
          </button>
          <button type="submit" 
                  id="createTeamBtn"
                  class="px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
            Crear Equipo
          </button>
        </div>
      </form>
    </div>
  </div>
<% end %>

<script>
function openCreateTeamModal() {
  const modal = document.getElementById('createTeamModal');
  if (modal) {
    modal.classList.remove('hidden');
    resetCreateTeamForm();
    
    // Enfocar en el input de nombre
    setTimeout(() => {
      const nameInput = document.getElementById('teamName');
      if (nameInput) {
        nameInput.focus();
      }
    }, 100);
  }
}

function closeCreateTeamModal() {
  const modal = document.getElementById('createTeamModal');
  if (modal) {
    modal.classList.add('hidden');
    resetCreateTeamForm();
  }
}

function resetCreateTeamForm() {
  const form = document.getElementById('createTeamForm');
  if (form) {
    form.reset();
  }
  
  // Limpiar errores
  const errorElements = document.querySelectorAll('[id$="Error"]');
  errorElements.forEach(el => {
    el.classList.add('hidden');
    el.textContent = '';
  });
  
  // Resetear preview del logo
  removeLogo();
  
  // Resetear preview de sigla
  updateAcronymPreview('?');
}

function previewLogo(input) {
  const file = input.files[0];
  if (file) {
    // Validar tipo de archivo
    const validTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];
    if (!validTypes.includes(file.type)) {
      showError('logoError', 'Tipo de archivo no v√°lido. Use JPEG, PNG, GIF o WebP.');
      input.value = '';
      return;
    }
    
    // Validar tama√±o
    if (file.size > 5 * 1024 * 1024) { // 5MB
      showError('logoError', 'El archivo es muy grande. M√°ximo 5MB.');
      input.value = '';
      return;
    }
    
    const reader = new FileReader();
    reader.onload = function(e) {
      const logoImage = document.getElementById('logoImage');
      const logoPreview = document.getElementById('logoPreview');
      const logoPlaceholder = document.getElementById('logoPlaceholder');
      const removeBtn = document.getElementById('removeLogoBtn');
      
      logoImage.src = e.target.result;
      logoPreview.classList.remove('hidden');
      logoPlaceholder.classList.add('hidden');
      removeBtn.classList.remove('hidden');
      
      hideError('logoError');
    };
    reader.readAsDataURL(file);
  }
}

function removeLogo() {
  const logoInput = document.getElementById('logoInput');
  const logoPreview = document.getElementById('logoPreview');
  const logoPlaceholder = document.getElementById('logoPlaceholder');
  const removeBtn = document.getElementById('removeLogoBtn');
  
  logoInput.value = '';
  logoPreview.classList.add('hidden');
  logoPlaceholder.classList.remove('hidden');
  removeBtn.classList.add('hidden');
  
  hideError('logoError');
}

function updateAcronymPreview(acronym) {
  const acronymPreview = document.getElementById('acronymPreview');
  if (acronymPreview) {
    acronymPreview.textContent = acronym || '?';
  }
}

function showError(elementId, message) {
  const errorElement = document.getElementById(elementId);
  if (errorElement) {
    errorElement.textContent = message;
    errorElement.classList.remove('hidden');
  }
}

function hideError(elementId) {
  const errorElement = document.getElementById(elementId);
  if (errorElement) {
    errorElement.classList.add('hidden');
    errorElement.textContent = '';
  }
}

// Actualizar preview de sigla mientras se escribe
document.addEventListener('DOMContentLoaded', function() {
  const acronymInput = document.getElementById('teamAcronym');
  if (acronymInput) {
    acronymInput.addEventListener('input', function() {
      updateAcronymPreview(this.value.toUpperCase());
    });
  }
});

// Manejar env√≠o del formulario
document.addEventListener('DOMContentLoaded', function() {
  console.log('üîß DOM loaded, setting up form handler');
  
  const form = document.getElementById('createTeamForm');
  if (form) {
    console.log('‚úÖ Form found, adding submit listener');
    
    form.addEventListener('submit', function(e) {
      console.log('üìù Form submit event triggered');
      e.preventDefault();
      
      const submitBtn = document.getElementById('createTeamBtn');
      const originalText = submitBtn.textContent;
      
      console.log('üöÄ Starting team creation process');
      
      // Deshabilitar bot√≥n y mostrar estado de carga
      submitBtn.disabled = true;
      submitBtn.textContent = 'Creando...';
      
      // Limpiar errores previos
      const errorElements = document.querySelectorAll('[id$="Error"]');
      errorElements.forEach(el => {
        el.classList.add('hidden');
        el.textContent = '';
      });
      
      const formData = new FormData(form);
      
      // Debug: mostrar datos del formulario
      console.log('üìã Form data:');
      for (let [key, value] of formData.entries()) {
        console.log(`  ${key}: ${value}`);
      }
      
      fetch('/teams', {
        method: 'POST',
        headers: {
          'X-CSRF-Token': document.querySelector('meta[name="csrf-token"]').getAttribute('content'),
          'Accept': 'application/json'
        },
        body: formData
      })
      .then(response => {
        console.log('üì° Response received:', response.status);
        return response.json();
      })
      .then(data => {
        console.log('üì¶ Response data:', data);
        
        if (data.success) {
          console.log('‚úÖ Equipo creado exitosamente');
          closeCreateTeamModal();
          
          // Redirigir al equipo creado o recargar la p√°gina
          if (data.redirect_url) {
            console.log('üîÑ Redirecting to:', data.redirect_url);
            window.location.href = data.redirect_url;
          } else {
            console.log('üîÑ Reloading page');
            window.location.reload();
          }
        } else {
          console.error('‚ùå Error creando equipo:', data.errors);
          
          // Mostrar errores espec√≠ficos
          if (data.errors) {
            data.errors.forEach(error => {
              if (error.includes('Name')) {
                showError('nameError', error);
              } else if (error.includes('Acronym')) {
                showError('acronymError', error);
              } else if (error.includes('Description')) {
                showError('descriptionError', error);
              } else if (error.includes('Logo')) {
                showError('logoError', error);
              } else {
                // Error general
                alert('Error: ' + error);
              }
            });
          }
        }
      })
      .catch(error => {
        console.error('‚ùå Error en la solicitud:', error);
        alert('Error al crear el equipo. Int√©ntelo nuevamente.');
      })
      .finally(() => {
        submitBtn.disabled = false;
        submitBtn.textContent = originalText;
      });
    });
  } else {
    console.error('‚ùå Form not found!');
  }
});

// Cerrar modal al hacer clic fuera
document.addEventListener('click', function(e) {
  const modal = document.getElementById('createTeamModal');
  if (e.target === modal) {
    closeCreateTeamModal();
  }
});

// Cerrar modal con tecla Escape
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') {
    const modal = document.getElementById('createTeamModal');
    if (modal && !modal.classList.contains('hidden')) {
      closeCreateTeamModal();
    }
  }
});
</script>

<script>
// Funci√≥n para eliminar equipo desde la lista
function deleteTeamFromList(teamId, teamName, teamAcronym, playersCount) {
  const message = `¬øEst√°s seguro de que deseas eliminar el equipo "${teamName}" (${teamAcronym})?\n\n` +
                  `Se eliminar√°n ${playersCount} asociaciones de jugadores.\n` +
                  `Los jugadores no ser√°n eliminados, solo se remover√°n del equipo.\n\n` +
                  `Esta acci√≥n no se puede deshacer.`;
  
  if (confirm(message)) {
    // Mostrar indicador de carga
    const button = event.target.closest('button');
    const originalContent = button.innerHTML;
    button.disabled = true;
    button.innerHTML = '<svg class="animate-spin h-4 w-4 text-red-100" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>';
    
    fetch(`/teams/${teamId}`, {
      method: 'DELETE',
      headers: {
        'X-CSRF-Token': document.querySelector('meta[name="csrf-token"]').getAttribute('content'),
        'Accept': 'application/json'
      }
    })
    .then(response => response.json())
    .then(data => {
      if (data.success) {
        console.log('‚úÖ Equipo eliminado exitosamente');
        
        // Mostrar mensaje de √©xito
        alert(`‚úÖ ${data.message}`);
        
        // Recargar la p√°gina para actualizar la lista
        window.location.reload();
      } else {
        console.error('‚ùå Error eliminando equipo:', data.error);
        alert('‚ùå Error al eliminar equipo: ' + data.error);
      }
    })
    .catch(error => {
      console.error('‚ùå Error en la solicitud:', error);
      alert('‚ùå Error al eliminar equipo. Int√©ntelo nuevamente.');
    })
    .finally(() => {
      // Restaurar bot√≥n
      button.disabled = false;
      button.innerHTML = originalContent;
    });
  }
}
</script>
